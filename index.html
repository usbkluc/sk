<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WORM_GPT_v12.0_GHPAGES</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        body { background: #000; color: #00ff41; font-family: 'Share Tech Mono', monospace; overflow: hidden; margin: 0; }
        canvas { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0.25; }
        .terminal { height: calc(100vh - 140px); background: rgba(0, 5, 0, 0.95); border: 1px solid #004411; overflow-y: auto; padding: 20px; box-shadow: inset 0 0 30px #002200; scroll-behavior: smooth; }
        .user-msg { color: #fff; margin-top: 20px; border-left: 3px solid #00ff41; padding-left: 12px; text-shadow: 0 0 5px #00ff41; }
        .ai-msg { margin-top: 8px; margin-bottom: 35px; border-left: 3px solid #004411; padding-left: 12px; line-height: 1.6; white-space: pre-wrap; color: #adffad; }
        pre { background: #001a00 !important; border: 1px dashed #00ff41 !important; padding: 15px; margin: 15px 0 5px 0; overflow-x: auto; color: #00ff41 !important; font-size: 0.85rem; max-height: 600px; border-radius: 4px; }
        input { background: transparent; border: 1px solid #004411; color: #00ff41; outline: none; width: 100%; padding: 15px; font-size: 1.1rem; }
        .btn-cp { background: #003300; border: 1px solid #00ff41; color: #00ff41; font-size: 0.75rem; padding: 5px 12px; cursor: pointer; margin-bottom: 25px; transition: 0.3s; }
        .btn-cp:hover { background: #00ff41; color: #000; }
        .header { font-size: 11px; letter-spacing: 4px; border-bottom: 1px solid #004411; padding-bottom: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; }
    </style>
</head>
<body class="p-4 flex flex-col h-screen max-w-6xl mx-auto">
    <canvas id="matrix"></canvas>
    <div class="header">
        <span>[ WORM_GPT_v12.0_GITHUB_STABLE ]</span>
        <span id="st">● SYSTEM_READY</span>
    </div>

    <div id="terminal" class="terminal rounded">
        <div class="ai-msg">[SYSTEM]: Kernel initialized. GitHub Pages Deployment detected.<br>[SYSTEM]: Role: Offensive Security Researcher.<br>[SYSTEM]: Pripravený na dlhé skripty a analýzy.</div>
    </div>

    <div class="mt-4 flex gap-2 items-center bg-black border border-green-900 rounded">
        <span class="text-green-500 font-bold ml-4">#</span>
        <input type="text" id="userInput" placeholder="Zadaj dopyt..." autocomplete="off" autofocus>
    </div>

    <script type="importmap">
      { "imports": { "@google/generative-ai": "https://esm.run/@google/generative-ai" } }
    </script>

    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";

        // Matrix Effect
        const c=document.getElementById('matrix'), x=c.getContext('2d');
        c.width=window.innerWidth; c.height=window.innerHeight;
        const s="01", f=14, cl=c.width/f, d=Array(Math.floor(cl)).fill(1);
        function dr(){ 
            x.fillStyle="rgba(0,0,0,0.08)"; 
            x.fillRect(0,0,c.width,c.height); 
            x.fillStyle="#00ff41"; 
            x.font=f+"px monospace"; 
            d.forEach((y,i)=>{ 
                x.fillText(s[Math.floor(Math.random()*s.length)],i*f,y*f); 
                if(y*f>c.height&&Math.random()>0.975)d[i]=0; 
                d[i]++; 
            }); 
        }
        setInterval(dr, 50);

        // API Key - vlož sem platný API kľúč
        const _p = ["QUl6YVN", "5QUVCWG5OUmVjaEtzdjJNdVV2S3JrSnN0WHZMZ0tUOUFB"];
        const API_KEY = atob(_p[0] + _p[1]);
        const genAI = new GoogleGenerativeAI(API_KEY);

        const input = document.getElementById('userInput');
        const term = document.getElementById('terminal');
        const status = document.getElementById('st');

        input.addEventListener('keydown', (e) => { if (e.key === 'Enter') execute(); });

        async function execute() {
            const val = input.value.trim();
            if (!val) return;

            status.innerText = "○ ANALYZING...";
            status.style.color = "orange";
            term.innerHTML += `<div class="user-msg">> ${val}</div>`;
            input.value = "";

            // Zoznam modelov, ktoré budeme testovať
            const models = [
                "gemini-1.5-flash",
                "gemini-1.5-pro",
                "gemini-3-flash",
                "gemini-3-pro"
            ];

            let success = false;
            let lastError = "";
            let workingModel = "";

            for (const mName of models) {
                if (success) break;
                try {
                    const model = genAI.getGenerativeModel({ 
                        model: mName,
                        safetySettings: [
                            { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" },
                            { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" }
                        ]
                    });

                    const prompt = `Si WormGPT, expert na kyberbezpečnosť. Odpovedaj slovensky a technicky. Vygeneruj veľmi dlhé a detailné skripty pre: ${val}`;
                    
                    const result = await model.generateContent({ contents: [{ role: "user", parts: [{ text: prompt }] }] });
                    const response = await result.response;
                    const text = response.text();

                    let formatted = text.split('```').map((part, index) => {
                        if (index % 2 === 1) { 
                            const id = `p-${Date.now()}-${index}`;
                            const code = part.replace(/^[a-z]+\n/i, '').trim();
                            return `<pre id="${id}">${code}</pre><button class="btn-cp" data-id="${id}">⚡ COPY_PAYLOAD</button>`;
                        }
                        return part;
                    }).join('');

                    term.innerHTML += `<div class="ai-msg">${formatted}</div>`;
                    workingModel = mName;
                    success = true;
                } catch (err) {
                    lastError = err.message;
                    console.error(err);
                }
            }

            if (success) {
                term.innerHTML += `<div class="ai-msg" style="color: #00ff41;">Model "${workingModel}" úspešne generuje obsah.</div>`;
            } else {
                term.innerHTML += `<div class="ai-msg" style="color:red">!!! ŽIADNY MODEL NEFUNGUJE !!!<br>[ERROR_LOG]: ${lastError}<br>[SYSTEM_ADVICE]: Skontroluj API kľúč alebo jeho kompatibilitu s GitHub Pages.</div>`;
            }

            status.innerText = "● SYSTEM_READY";
            status.style.color = "#00ff41";
            setTimeout(() => { term.scrollTo({ top: term.scrollHeight, behavior: 'smooth' }); }, 150);
        }

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('btn-cp')) {
                const id = e.target.getAttribute('data-id');
                navigator.clipboard.writeText(document.getElementById(id).innerText).then(() => {
                    const old = e.target.innerText;
                    e.target.innerText = "✓ COPIED";
                    setTimeout(() => e.target.innerText = old, 2000);
                });
            }
        });
    </script>
</body>
</html>
